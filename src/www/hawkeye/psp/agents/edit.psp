<%@ include file="../header.psp" %>

<table>
<tr>
<td>
<%@ include file="agents.psp" %> 
</td>

<td>
<%
import bongo.admin.Util as Util
from bongo.hawkeye.AgentAttributes import AgentAttributes

server, agent = rp.pathInfo

dn = rp.path.replace("/", "\\")

if form:
    props = AgentAttributes(mdb, dn, form)
    if props.Validate():
        props.Save()
else:
    props = AgentAttributes(mdb, dn)
# outdent
%>
<b><%= agent %></b><%= props.IsEnabled() and "(enabled)" or "(disabled)" %><br/>

<%
constant = props.GetConstant()

for (id, name, value) in constant:
    # indent
%>
<%= name %>: <%= value %><br/>
<%
#outdent
%>

<form method="post" action="<%= req.uri %>">
<%
editable = props.GetEditable()

for (id, name, value) in editable:
    # indent
%>
<%= name %><input type="text" name="<%= id %>" value="<%= value %>" size="<%= len(value) %>"/><br/>
<%
#outdent
%>

<input type="submit" value="Submit"/>
</form>
</td>
</tr>
</table>

<%@ include file="../footer.psp" %>
