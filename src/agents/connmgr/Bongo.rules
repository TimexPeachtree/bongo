# -*- Makefile -*-
cmmoduledir = $(libdir)/connmgr
cmmodule_LTLIBRARIES :=

sbin_PROGRAMS += bongoconnmgr

bongoconnmgr_SOURCES :=				\
	src/agents/connmgr/connmgr.c		\
	src/agents/connmgr/connmgrp.h		\
	src/agents/connmgr/modules.c

bongoconnmgr_LDADD :=					   \
	libbongomanagement.la				   \
	libbongomsgapi.la				   \
	libbongomdb.la					   \
	libbongologger.la				   \
	libbongoconnio.la				   \
	libbongomemmgr.la				   \
	libbongoutil.la					   \
	libbongoxpl.la					   \
	$(top_builddir)/import/log4c/log4c/libbongolog4c.la \
	$(LIBSQLITE_LIBS)				   \
	$(PTHREAD_LIBS)					   \
	$(ALL_LIBS)

src/agents/connmgr/all: bongoconnmgr		\
	src/agents/connmgr/cmmodules/rbl/all	\
	src/agents/connmgr/cmmodules/rdns/all	\
	src/agents/connmgr/cmmodules/user/all	\
	src/agents/connmgr/cmmodules/lists/all

src/agents/connmgr/clean: clean
src/agents/connmgr/install:
	@cd $(top_builddir) && $(MAKE) $(MFLAGS) sbin_PROGRAMS=bongoconnmgr \
		install-sbinPROGRAMS install-cmmoduleLTLIBRARIES
