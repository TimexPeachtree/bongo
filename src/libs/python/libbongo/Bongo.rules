# -*- Makefile -*-
pkgpyexecdir = $(pyexecdir)/libbongo

pkgpyexec_PYTHON :=				\
	src/libs/python/libbongo/__init__.py

pkgpyexec_LTLIBRARIES :=			\
	libs.la					\
	bootstrap.la

#	src/libs/python/libbongo/mdb.c		
libs_la_SOURCES :=				\
	src/libs/python/libbongo/cal.c		\
	src/libs/python/libbongo/calcmd.c	\
	src/libs/python/libbongo/libs.c		\
	src/libs/python/libbongo/libs.h		\
	src/libs/python/libbongo/msgapi.c	\
	src/libs/python/libbongo/msgapi-defs.c	\
	src/libs/python/libbongo/msgapi-defs.h	\
	src/libs/python/libbongo/pybongo.c	\
	src/libs/python/libbongo/pybongo.h	\
	src/libs/python/libbongo/streamio.c	\
	src/libs/python/libbongo/json.c		\
	src/libs/python/libbongo/json.h		\
	src/libs/python/libbongo/bongoutil.c

libs_la_CPPFLAGS := $(AM_CPPFLAGS)		\
	$(PYTHON_CPPFLAGS)			\
	$(bongo_CFLAGS)

libs_la_LDFLAGS := -avoid-version -module
libs_la_LIBADD :=				\
	$(PYTHON_LIBS)				\
	libbongocal.la				\
	libbongocalcmd.la			\
	libbongoutil.la				\
	libbongo-json.la				\
	libbongomsgapi.la			\
	libbongostreamio.la

#	src/libs/python/libbongo/mdb.c		
bootstrap_la_SOURCES :=				\
	src/libs/python/libbongo/bootstrap.c	\
	src/libs/python/libbongo/bootstrap.h	\
	src/libs/python/libbongo/msgapi-defs.c	\
	src/libs/python/libbongo/msgapi-defs.h	\
	src/libs/python/libbongo/pybongo.c	\
	src/libs/python/libbongo/pybongo.h

bootstrap_la_CPPFLAGS := $(AM_CPPFLAGS)		\
	$(PYTHON_CPPFLAGS)			\
	$(bongo_CFLAGS)

bootstrap_la_LDFLAGS := -avoid-version -module
bootstrap_la_LIBADD :=				\
	$(PYTHON_LIBS)				\
	libbongomsgapi.la

src/libs/python/libbongo/libs.so: libs.la
	cp .libs/libs.so $@

src/libs/python/libbongo/bootstrap.so: bootstrap.la
	cp .libs/bootstrap.so $@

noinst_DATA +=					\
	src/libs/python/libbongo/libs.so	\
	src/libs/python/libbongo/bootstrap.so	

CLEANFILES +=					\
	src/libs/python/libbongo/libs.so	\
	src/libs/python/libbongo/bootstrap.so	

src/libs/python/libbongo/all:			\
	src/libs/python/libbongo/libs.so	\
	src/libs/python/libbongo/bootstrap.so	

src/libs/python/bongo/clean: clean
